var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);import{p as i,P as s,g as n}from"./phaser-BtzE6GLN.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class a extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class r extends i.Scene{constructor(){super("GameOver"),e(this,"camera"),e(this,"background"),e(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class o extends Phaser.GameObjects.Text{constructor(t,e,i,s,n){super(t,e,i,s,{...h,...n}),t.add.existing(this)}}const h={fontSize:"24px",color:"#ffffff",fontFamily:'"Play"'};class u extends s.GameObjects.Container{constructor(t,i,n,a,r){super(t,i,n),e(this,"supplies"),e(this,"lemonImage"),e(this,"lemonText"),e(this,"sugarImage"),e(this,"sugarText"),e(this,"iceImage"),e(this,"iceText"),e(this,"cupImage"),e(this,"cupText"),e(this,"lemonadePitcher"),e(this,"lemonadePitcherImage"),e(this,"lemonadePitcherText"),this.supplies=a,this.lemonadePitcher=r,this.lemonImage=t.add.image(0,12,"lemon"),this.lemonText=new o(t,30,0,this.supplies.lemon.toString()),this.sugarImage=t.add.image(100,12,"sugar"),this.sugarText=new o(t,130,0,this.supplies.sugar.toString()),this.iceImage=t.add.image(200,12,"ice"),this.iceText=new o(t,230,0,this.supplies.ice.toString()),this.cupImage=t.add.image(300,12,"cup"),this.cupText=new o(t,330,0,this.supplies.cup.toString()),this.lemonadePitcher&&(this.lemonadePitcherImage=t.add.image(400,12,"lemonade-pitcher"),this.lemonadePitcherText=new o(t,430,0,this.lemonadePitcher.amount.toString()),this.lemonadePitcher.on("change",(t=>{this.lemonadePitcherText.setText(t.toString())})),this.add([this.lemonadePitcherImage,this.lemonadePitcherText])),this.supplies.on("lemonChanged",(t=>{this.lemonText.setText(t.toString())})),this.supplies.on("sugarChanged",(t=>{this.sugarText.setText(t.toString())})),this.supplies.on("iceChanged",(t=>{this.iceText.setText(t.toString())})),this.supplies.on("cupChanged",(t=>{this.cupText.setText(t.toString())})),this.add([this.lemonImage,this.lemonText,this.sugarImage,this.sugarText,this.iceImage,this.iceText,this.cupImage,this.cupText]),t.add.existing(this),t.events.on(s.Scenes.Events.SHUTDOWN,this.onSceneShutdown,this)}onSceneShutdown(){var t;this.supplies.off("lemonChanged"),this.supplies.off("sugarChanged"),this.supplies.off("iceChanged"),this.supplies.off("cupChanged"),null==(t=this.lemonadePitcher)||t.off("change")}}class c extends s.GameObjects.Container{constructor(t,i,n,a){super(t,i,n),e(this,"budgetText"),e(this,"budget"),this.budget=a,this.budgetText=new o(t,0,12,`$ ${a.getAmountString()}`),this.budget.on("change",this.updateBudgetText,this),this.add([this.budgetText]),t.add.existing(this),t.events.on(s.Scenes.Events.SHUTDOWN,this.onSceneShutdown,this)}updateBudgetText(){this.budgetText.setText(this.budget.getAmountString())}onSceneShutdown(){this.budget.off("change",this.updateBudgetText,this)}}const l=[10,11,12,14,16,20,25,33];class d extends Phaser.GameObjects.Container{constructor(t,i,s,n,a=!1,r){super(t,i,s),e(this,"startButton"),e(this,"emptyButton"),e(this,"buttonWithRadius"),this.startButton=new Phaser.GameObjects.Text(t,0,0,n,{...p(a),...r}),this.startButton.setOrigin(.5);const o=this.startButton.width,h=this.startButton.height;this.emptyButton=new Phaser.GameObjects.Rectangle(t,0,0,o+16,h+32,0,0),this.emptyButton.setOrigin(.5),this.emptyButton.setInteractive({useHandCursor:!a}),this.emptyButton.on("pointerdown",(()=>{a||this.emit("pointerdown")})),this.buttonWithRadius=this.createRoundedBackground(o,h),this.add([this.buttonWithRadius,this.emptyButton,this.startButton]),t.add.existing(this)}createRoundedBackground(t,e){const i=this.scene.add.graphics(),s=t+16,n=e+32;return i.fillStyle(7588641,1),i.fillRoundedRect(-s/2,-n/2,s,n,10),i}destory(){this.startButton.destroy(),this.emptyButton.destroy(),this.buttonWithRadius.destroy()}}const p=t=>({fontSize:"24px",color:t?"#9bdb63":"#ffffff",align:"center"});class g extends Phaser.GameObjects.Image{constructor(t,e,i){super(t,e,i,"minus"),this.setInteractive({useHandCursor:!0}),this.scale=.45,this.setOrigin(0,0)}}class m extends Phaser.GameObjects.Image{constructor(t,e,i){super(t,e,i,"plus"),this.setInteractive({useHandCursor:!0}),this.scale=.45,this.setOrigin(0,0)}}class f extends Phaser.GameObjects.Container{constructor(t,i,s,n,a,r){super(t,i,s),e(this,"plusButton"),e(this,"minusButton"),e(this,"perBundleText"),e(this,"priceText"),e(this,"bundlesToBuy"),e(this,"bundlesToBuyText"),e(this,"price"),e(this,"totalPrice"),e(this,"perBundle"),this.price=r,this.totalPrice=0,this.perBundle=a,this.minusButton=new g(t,0,0),this.minusButton.on("pointerdown",this.onMinusButtonClicked,this),this.minusButton.setVisible(!1),this.perBundleText=t.add.text(50,0,a.toString()+" "+n,{fontSize:"24px"}),this.priceText=t.add.text(50,25,r.toFixed(2)+" $",{fontSize:"24px"}),this.bundlesToBuyText=t.add.text(250,0,"0",{fontSize:"24px"}),this.plusButton=new m(t,300,0),this.plusButton.on("pointerdown",this.onPlusButtonClicked,this),this.bundlesToBuy=0,this.add([this.minusButton,this.perBundleText,this.plusButton,this.priceText,this.bundlesToBuyText]),t.add.existing(this)}onPlusButtonClicked(){this.bundlesToBuy+=1,this.updateTotalPrice(),this.bundlesToBuyText.setText(this.bundlesToBuy.toString()),this.updateButtonVisibility()}onMinusButtonClicked(){0!==this.bundlesToBuy&&(this.bundlesToBuy-=1,this.updateTotalPrice(),this.bundlesToBuyText.setText(this.bundlesToBuy.toString()),this.updateButtonVisibility())}updateButtonVisibility(){this.updatePlusButtonVisibility(),this.updateMinusButtonVisibility()}updatePlusButtonVisibility(){this.plusButton.setVisible(this.bundlesToBuy<10)}updateMinusButtonVisibility(){this.minusButton.setVisible(this.bundlesToBuy>0)}updateTotalPrice(){this.totalPrice=this.bundlesToBuy*this.price,this.emit("update")}getTotalPrice(){return this.totalPrice}getAmount(){return this.bundlesToBuy*this.perBundle}reset(){this.bundlesToBuy=0,this.updateTotalPrice(),this.bundlesToBuyText.setText(this.bundlesToBuy.toString()),this.updateButtonVisibility()}}class y extends Phaser.GameObjects.Container{constructor(t,i,s,n,a,r){super(t,i,s),e(this,"firstOption"),e(this,"secondOption"),e(this,"thirdOption"),this.firstOption=new f(t,0,0,n,r[0],a[0]),this.secondOption=new f(t,0,50,n,r[1],a[1]),this.thirdOption=new f(t,0,100,n,r[2],a[2]),this.add([this.firstOption,this.secondOption,this.thirdOption]),t.add.existing(this)}getTotalPrice(){return this.firstOption.getTotalPrice()+this.secondOption.getTotalPrice()+this.thirdOption.getTotalPrice()}getAmount(){return this.firstOption.getAmount()+this.secondOption.getAmount()+this.thirdOption.getAmount()}reset(){this.firstOption.reset(),this.secondOption.reset(),this.thirdOption.reset()}}class x extends y{constructor(t,e,i){super(t,e,i,"sugar",[4.8,7,15],[12,24,48])}}class w extends y{constructor(t,e,i){super(t,e,i,"lemons",[4.8,7.2,9.6],[12,24,48])}}class b extends y{constructor(t,e,i){super(t,e,i,"cubes",[1,3,5],[50,200,500])}}class T extends y{constructor(t,e,i){super(t,e,i,"cups",[1,2.35,3.75],[75,225,400])}}class v extends Phaser.GameObjects.Container{constructor(t,i,s,n){super(t,i,s),e(this,"title"),e(this,"description"),e(this,"lemonImage"),e(this,"lemonImageBackground"),e(this,"sugarImage"),e(this,"sugarImageBackground"),e(this,"iceImage"),e(this,"iceImageBackground"),e(this,"cupImage"),e(this,"cupImageBackground"),e(this,"buyUIBackground"),e(this,"selectedTabIndex"),e(this,"buyLemonUI"),e(this,"buySugarUI"),e(this,"buyIceUI"),e(this,"buyCupsUI"),e(this,"purchaseSupplies"),e(this,"buyButton"),this.title=new o(t,0,0,"Buy Supplies"),this.description=t.add.text(0,25,"Select the supplies you want to buy",{fontSize:"16px"}),this.lemonImage=t.add.image(32,58,"lemon"),this.lemonImage.setOrigin(0,0),this.lemonImage.setSize(64,64),this.lemonImageBackground=t.add.rectangle(16,50,64,50,33321,1),this.lemonImageBackground.setOrigin(0,0),this.lemonImage.setInteractive({useHandCursor:!0}),this.lemonImage.on("pointerdown",(()=>{this.onTabSelected(0)})),this.sugarImage=t.add.image(132,58,"sugar"),this.sugarImage.setOrigin(0,0),this.sugarImage.setSize(64,64),this.sugarImageBackground=t.add.rectangle(116,50,64,50,33321,1),this.sugarImageBackground.setOrigin(0,0),this.sugarImage.setInteractive({useHandCursor:!0}),this.sugarImage.on("pointerdown",(()=>{this.onTabSelected(1)})),this.iceImage=t.add.image(252,58,"ice"),this.iceImage.setOrigin(0,0),this.iceImage.setSize(64,64),this.iceImageBackground=t.add.rectangle(236,50,64,50,33321,1),this.iceImageBackground.setOrigin(0,0),this.iceImage.setInteractive({useHandCursor:!0}),this.iceImage.on("pointerdown",(()=>{this.onTabSelected(2)})),this.cupImage=t.add.image(372,58,"cup"),this.cupImage.setOrigin(0,0),this.cupImage.setSize(64,64),this.cupImageBackground=t.add.rectangle(356,50,64,50,33321,1),this.cupImageBackground.setOrigin(0,0),this.cupImage.setInteractive({useHandCursor:!0}),this.cupImage.on("pointerdown",(()=>{this.onTabSelected(3)})),this.selectedTabIndex=0,this.buyLemonUI=new w(t,16,116),this.buySugarUI=new x(t,16,116),this.buyIceUI=new b(t,16,116),this.buyCupsUI=new T(t,16,116),this.buyUIBackground=t.add.rectangle(0,100,432,180,33321,1),this.buyUIBackground.setOrigin(0,0),this.buyButton=new d(t,340,320,"Buy"),this.buyButton.setInteractive(),this.buyButton.on("pointerdown",this.onBuyButtonClicked,this),this.purchaseSupplies=n,this.add([this.title,this.description,this.buyUIBackground,this.lemonImageBackground,this.lemonImage,this.sugarImageBackground,this.sugarImage,this.iceImageBackground,this.iceImage,this.cupImageBackground,this.cupImage,this.buyButton,this.buyLemonUI,this.buySugarUI,this.buyIceUI,this.buyCupsUI]),t.add.existing(this),this.updateUI()}onTabSelected(t){this.selectedTabIndex=t,this.updateUI()}onBuyButtonClicked(){const t={lemonTotalPrice:this.buyLemonUI.getTotalPrice(),sugarTotalPrice:this.buySugarUI.getTotalPrice(),iceTotalPrice:this.buyIceUI.getTotalPrice(),cupsTotalPrice:this.buyCupsUI.getTotalPrice()},e={lemonTotalAmount:this.buyLemonUI.getAmount(),sugarTotalAmount:this.buySugarUI.getAmount(),iceTotalAmount:this.buyIceUI.getAmount(),cupsTotalAmount:this.buyCupsUI.getAmount()};this.purchaseSupplies(t,e)}updateUI(){switch(this.buyLemonUI.setVisible(!1),this.buySugarUI.setVisible(!1),this.buyIceUI.setVisible(!1),this.buyCupsUI.setVisible(!1),this.lemonImageBackground.setVisible(!1),this.sugarImageBackground.setVisible(!1),this.iceImageBackground.setVisible(!1),this.cupImageBackground.setVisible(!1),this.selectedTabIndex){case 0:this.buyLemonUI.setVisible(!0),this.lemonImageBackground.setVisible(!0);break;case 1:this.buySugarUI.setVisible(!0),this.sugarImageBackground.setVisible(!0);break;case 2:this.buyIceUI.setVisible(!0),this.iceImageBackground.setVisible(!0);break;case 3:this.buyCupsUI.setVisible(!0),this.cupImageBackground.setVisible(!0)}}reset(){this.buyLemonUI.reset(),this.buySugarUI.reset(),this.buyIceUI.reset(),this.buyCupsUI.reset()}}class C extends Phaser.GameObjects.Text{constructor(t,e,i,s){super(t,e,i,s,{color:"white",fontSize:"16px"}),t.add.existing(this)}}class P extends Phaser.GameObjects.Container{constructor(t,i,s,n){super(t,i,s),e(this,"firstTitle"),e(this,"firstDescription"),e(this,"secondTitle"),e(this,"secondDescription"),e(this,"priceText"),e(this,"pricePlusButton"),e(this,"priceMinusButton"),e(this,"advertisingText"),e(this,"advertisingPlusButton"),e(this,"advertisingMinusButton"),this.firstTitle=new o(t,0,0,"Price"),this.firstDescription=new C(t,0,30,"Skills, instinct, judgement, luck... Do you \nhave what it takes to set the perfect price?"),this.priceMinusButton=new g(t,0,90),this.priceMinusButton.on("pointerdown",(()=>{n.decrease(),this.priceText.setText(n.amountString),this.priceMinusButton.setVisible(n.amount>.2),this.priceMinusButton.setInteractive(n.amount>.2)})),this.priceText=new o(t,60,100,n.amount.toFixed(2)),this.pricePlusButton=new m(t,120,90),this.pricePlusButton.on("pointerdown",(()=>{n.increase(),this.priceText.setText(n.amountString),this.priceMinusButton.setVisible(!0),this.priceMinusButton.setInteractive(!0)})),this.secondTitle=new o(t,0,150,"Advertising"),this.secondDescription=new C(t,0,180,"When your reputation needs a little boost, \nspending a few dollars here can really make \nthe difference by attracting more customers \nto your stand."),this.advertisingMinusButton=new g(t,0,240),this.advertisingText=new o(t,60,250,"0.00"),this.advertisingPlusButton=new m(t,120,240),this.add([this.firstTitle,this.firstDescription,this.priceMinusButton,this.priceText,this.pricePlusButton,this.secondTitle,this.secondDescription,this.advertisingMinusButton,this.advertisingText,this.advertisingPlusButton]),t.add.existing(this)}}class I extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i);let s=0;const n=new S(t,s,0,"results");s+=n.getContainerWidth()/2+7;const a=new S(t,s,0,"rent");a.setPosition(s+a.getContainerWidth()/2,0),s+=a.getContainerWidth()+7;const r=new S(t,s,0,"upgrades");r.setPosition(s+r.getContainerWidth()/2,0),s+=r.getContainerWidth()+7;const o=new S(t,s,0,"staff");o.setPosition(s+o.getContainerWidth()/2,0),s+=o.getContainerWidth()+7;const h=new S(t,s,0,"marketing");h.setPosition(s+h.getContainerWidth()/2,0),s+=h.getContainerWidth()+7;const u=new S(t,s,0,"recipe");u.setPosition(s+u.getContainerWidth()/2,0),s+=u.getContainerWidth()+7;const c=new S(t,s,0,"supplies");c.setPosition(s+c.getContainerWidth()/2,0),s+=c.getContainerWidth()+7,n.setSize(n.getContainerWidth(),n.getContainerHeight()),a.setSize(a.getContainerWidth(),a.getContainerHeight()),r.setSize(r.getContainerWidth(),r.getContainerHeight()),o.setSize(o.getContainerWidth(),o.getContainerHeight()),h.setSize(h.getContainerWidth(),h.getContainerHeight()),u.setSize(u.getContainerWidth(),u.getContainerHeight()),c.setSize(c.getContainerWidth(),c.getContainerHeight()),n.setInteractive({useHandCursor:!0}),a.setInteractive({useHandCursor:!0}),r.setInteractive({useHandCursor:!0}),o.setInteractive({useHandCursor:!0}),h.setInteractive({useHandCursor:!0}),u.setInteractive({useHandCursor:!0}),c.setInteractive({useHandCursor:!0}),n.on("pointerdown",(()=>{this.emit("tabSelected",0)})),a.on("pointerdown",(()=>{this.emit("tabSelected",1)})),r.on("pointerdown",(()=>{this.emit("tabSelected",2)})),o.on("pointerdown",(()=>{this.emit("tabSelected",3)})),h.on("pointerdown",(()=>{this.emit("tabSelected",4)})),u.on("pointerdown",(()=>{this.emit("tabSelected",5)})),c.on("pointerdown",(()=>{this.emit("tabSelected",6)})),this.add([n,a,r,o,h,u,c]),t.add.existing(this)}}class S extends Phaser.GameObjects.Container{constructor(t,i,s,n){super(t,i,s),e(this,"text"),e(this,"image"),e(this,"background");const{_text:a,_image:r}=this.getItemFromKey(n);this.text=new Phaser.GameObjects.Text(t,0,0,a,{fontFamily:"Arial",fontSize:"14px",color:"#ffffff"}),this.image=new Phaser.GameObjects.Image(t,0,0,r),this.text.setOrigin(.5,.5),this.image.setOrigin(.5,.5),this.image.y=-this.text.height/2-5,this.text.y=this.image.height/2+5;const o=Math.max(this.text.width,this.image.width)+16,h=this.text.height+this.image.height+32;this.background=new Phaser.GameObjects.Rectangle(t,0,0,o,h,7588641),this.add([this.background,this.image,this.text]),t.add.existing(this)}getItemFromKey(t){switch(t){case"results":return{_text:"Results",_image:"results-32"};case"rent":return{_text:"Rent",_image:"rent-32"};case"upgrades":return{_text:"Upgrades",_image:"upgrades-32"};case"staff":return{_text:"Staff",_image:"staff-32"};case"marketing":return{_text:"Marketing",_image:"marketing-32"};case"recipe":return{_text:"Recipe",_image:"recipe-32"};case"supplies":return{_text:"Supplies",_image:"supplies-32"};default:return{_text:"",_image:""}}}getContainerWidth(){return this.background.width}getContainerHeight(){return this.background.height}}class B extends Phaser.GameObjects.Container{constructor(t,i,s,n,a){super(t,i,s),e(this,"title"),e(this,"description"),e(this,"recipe"),e(this,"lemonPlusButton"),e(this,"lemonMinusButton"),e(this,"sugarPlusButton"),e(this,"sugarMinusButton"),e(this,"icePlusButton"),e(this,"iceMinusButton"),e(this,"lemonText"),e(this,"lemonImage"),e(this,"sugarText"),e(this,"sugarImage"),e(this,"iceText"),e(this,"iceImage"),e(this,"supplies"),e(this,"cupsPerPitcherText"),e(this,"costPerCupText"),e(this,"recipeImage"),e(this,"cupImage"),this.title=new o(t,0,0,"Recipe"),this.description=t.add.text(0,25,"Tweak your recipe according to the temperature, \nadding more ice when needed. Always keep a good \nbalance between all ingredients.",{fontSize:"16px"}),this.supplies=n,this.recipe=a,this.recipeImage=t.add.image(0,100,"recipe-16"),this.recipeImage.setOrigin(0,0),this.cupImage=t.add.image(0,220,"cup-16"),this.cupImage.setOrigin(0,0),this.createLemonControls(t),this.createSugarControls(t),this.createIceControls(t),this.cupsPerPitcherText=t.add.text(250,100,"Cups per pitcher: \n"+this.recipe.cupsPerPitcher.toString(),{fontSize:"16px"}),this.costPerCupText=t.add.text(250,150,"Cost per cup:\n"+this.recipe.costPerCup.toFixed(2)+" $",{fontSize:"16px"}),this.recipe.on("change",(t=>{this.cupsPerPitcherText.setText("Cups per pitcher: \n"+t.cupsPerPitcher.toString()),this.costPerCupText.setText("Cost per cup:\n"+t.costPerCup.toFixed(2)+" $")})),this.add([this.title,this.description,this.lemonPlusButton,this.lemonMinusButton,this.lemonImage,this.lemonText,this.sugarPlusButton,this.sugarMinusButton,this.sugarImage,this.sugarText,this.icePlusButton,this.iceMinusButton,this.iceImage,this.iceText,this.cupsPerPitcherText,this.costPerCupText,this.recipeImage,this.cupImage]),t.add.existing(this),t.events.on("shutdown",this.onSceneShutdown,this)}createLemonControls(t){this.lemonMinusButton=new g(t,30,100),this.lemonMinusButton.on("pointerdown",(()=>this.decreaseIngredient("lemon")),this),this.lemonMinusButton.setVisible(this.recipe.lemon>1),this.lemonImage=t.add.image(110,120,"lemon"),this.lemonText=new o(t,150,110,this.recipe.lemon.toString()),this.lemonPlusButton=new m(t,180,100),this.lemonPlusButton.on("pointerdown",(()=>this.increaseIngredient("lemon")),this)}createSugarControls(t){this.sugarMinusButton=new g(t,30,150),this.sugarMinusButton.on("pointerdown",(()=>this.decreaseIngredient("sugar")),this),this.sugarMinusButton.setVisible(this.recipe.sugar>1),this.sugarImage=t.add.image(110,170,"sugar"),this.sugarText=new o(t,150,160,this.recipe.sugar.toString()),this.sugarPlusButton=new m(t,180,150),this.sugarPlusButton.on("pointerdown",(()=>this.increaseIngredient("sugar")),this)}createIceControls(t){this.iceMinusButton=new g(t,30,220),this.iceMinusButton.on("pointerdown",(()=>this.decreaseIngredient("ice")),this),this.iceMinusButton.setVisible(this.recipe.ice>1),this.iceImage=t.add.image(110,240,"ice"),this.iceText=new o(t,150,230,this.recipe.ice.toString()),this.icePlusButton=new m(t,180,220),this.icePlusButton.on("pointerdown",(()=>this.increaseIngredient("ice")),this)}increaseIngredient(t){switch(t){case"lemon":this.recipe.lemon+=1,this.lemonText.setText(this.recipe.lemon.toString()),this.lemonMinusButton.setVisible(!0);break;case"sugar":this.recipe.sugar+=1,this.sugarText.setText(this.recipe.sugar.toString()),this.sugarMinusButton.setVisible(!0);break;case"ice":this.recipe.ice+=1,this.iceText.setText(this.recipe.ice.toString()),this.iceMinusButton.setVisible(!0)}}decreaseIngredient(t){switch(t){case"lemon":this.recipe.lemon>1&&(this.recipe.lemon-=1,this.lemonText.setText(this.recipe.lemon.toString())),1===this.recipe.lemon?this.lemonMinusButton.setVisible(!1):this.lemonMinusButton.setVisible(!0);break;case"sugar":this.recipe.sugar>1&&(this.recipe.sugar-=1,this.sugarText.setText(this.recipe.sugar.toString())),1===this.recipe.sugar?this.sugarMinusButton.setVisible(!1):this.sugarMinusButton.setVisible(!0);break;case"ice":this.recipe.ice>1&&(this.recipe.ice-=1,this.iceText.setText(this.recipe.ice.toString())),1===this.recipe.ice?this.iceMinusButton.setVisible(!1):this.iceMinusButton.setVisible(!0)}}onSceneShutdown(){this.recipe.off("change")}}const k=[{title:"The Suburbs",shortDescription:"Your very own \nneighborhood!",description:"Is there a better place to start your Lemonade empire than \nyour very own neighborhood? Don't expect a lot of customers \nhere, but the free rent and popularity bonus will help you \ntest the ups and downs of the business without too much risk.",price:0},{title:"The Park",shortDescription:"Kids love lemonade!",description:"With a decent customer base and a fairly cheap daily rent, \nthe park is a nice place to start expanding your business. \nKids just can't resist a cool glass of lemonade, so long as you \nkeep the price in their range.",price:10},{title:"Downtown",shortDescription:"Now it's time to get \nserious",description:"Lots of customers with money to spend means you can hit the \nbig bucks in the downtown area... just make sure you have \nthe proper equipment: businessmen with their busy schedules \nsimply hate waiting in line.",price:30}];class _ extends Phaser.GameObjects.Container{constructor(t,i,s,n){super(t,i,s),e(this,"title"),e(this,"imageAreaTodo"),e(this,"description"),e(this,"popularity"),e(this,"satisfaction"),e(this,"price"),e(this,"nextButton"),e(this,"previousButton"),e(this,"seekingLocationIndex"),e(this,"background"),e(this,"rentButton"),this.seekingLocationIndex=0,this.background=t.add.rectangle(45,0,360,180,33321,1),this.background.setOrigin(0,0),this.previousButton=new d(t,30,30,"<"),this.previousButton.setInteractive(),this.previousButton.on("pointerdown",(()=>{this.seekingLocationIndex=(this.seekingLocationIndex-1+k.length)%k.length,this.updateUI(n)})),this.title=new Phaser.GameObjects.Text(t,225,5,k[this.seekingLocationIndex].title,{color:"white",fontSize:"16px"}),this.imageAreaTodo=new Phaser.GameObjects.Rectangle(t,50,5,170,80),this.imageAreaTodo.setStrokeStyle(2,16777215),this.imageAreaTodo.setOrigin(0,0),this.description=new Phaser.GameObjects.Text(t,225,35,k[this.seekingLocationIndex].shortDescription,{color:"white",fontSize:"12px"}),this.popularity=new Phaser.GameObjects.Text(t,55,100,`Popularity: ${n.getPopularity(this.seekingLocationIndex)}`,{color:"white",fontSize:"12px"}),this.satisfaction=new Phaser.GameObjects.Text(t,55,150,`Satisfaction: ${n.getSatisfaction(this.seekingLocationIndex)}`,{color:"white",fontSize:"12px"}),this.price=new o(t,245,130,`${k[this.seekingLocationIndex].price.toFixed(2)} $`),this.nextButton=new d(t,420,30,">"),this.nextButton.setInteractive(),this.nextButton.on("pointerdown",(()=>{this.seekingLocationIndex=(this.seekingLocationIndex+1)%k.length,this.updateUI(n)})),this.rentButton=new d(t,360,240,"RENT",this.seekingLocationIndex===n.getCurrentLocationKey()),this.rentButton.setInteractive(),this.rentButton.on("pointerdown",(()=>{n.setCurrentLocationKey(this.seekingLocationIndex),this.updateRentButton(n)})),this.add([this.background,this.previousButton,this.imageAreaTodo,this.title,this.description,this.nextButton,this.popularity,this.satisfaction,this.price,this.rentButton]),t.add.existing(this)}updateUI(t){this.title.setText(k[this.seekingLocationIndex].title),this.description.setText(k[this.seekingLocationIndex].shortDescription),this.popularity.setText(`Popularity: ${t.getPopularity(this.seekingLocationIndex)}`),this.satisfaction.setText(`Satisfaction: ${t.getSatisfaction(this.seekingLocationIndex)}`),this.price.setText(`${k[this.seekingLocationIndex].price.toFixed(2)} $`),this.updateRentButton(t)}updateRentButton(t){this.rentButton.destroy(),this.rentButton=new d(this.scene,360,240,"RENT",this.seekingLocationIndex===t.getCurrentLocationKey()),this.rentButton.setInteractive(),this.rentButton.on("pointerdown",(()=>{t.setCurrentLocationKey(this.seekingLocationIndex),this.updateRentButton(t)})),this.add(this.rentButton)}}class O extends Phaser.GameObjects.Container{constructor(t,i,s,n){super(t,i,s),e(this,"title"),e(this,"description"),e(this,"locationWithRentButton"),this.title=new o(t,0,0,"Locations"),this.description=new Phaser.GameObjects.Text(t,0,30,"Choose a location",{color:"white",fontSize:"16px"}),this.locationWithRentButton=new _(t,0,90,n),this.add([this.title,this.description,this.locationWithRentButton]),t.add.existing(this)}}const L=["Yesterday's Results","Charts","Profit & Loss","Balance Sheet"];class A extends Phaser.GameObjects.Container{constructor(t,i,s){super(t,i,s),e(this,"title"),this.title=new o(t,0,0,L[0]),this.add(this.title),t.add.existing(this)}}class M extends Phaser.GameObjects.Container{constructor(t,i,s){super(t,i,s),e(this,"title"),e(this,"description"),this.title=new o(t,0,0,"Staff"),this.description=new C(t,0,30,"Hire the right person at the right time \nto send your sales through the roof."),this.add([this.title,this.description]),t.add.existing(this)}}class j extends Phaser.GameObjects.Container{constructor(t,i,s){super(t,i,s),e(this,"title"),e(this,"description"),this.title=new o(t,0,0,"Upgrades"),this.description=new C(t,0,30,"Improve your stand to send your sales through \nthe roof!"),this.add([this.title,this.description]),t.add.existing(this)}}class E extends Phaser.GameObjects.Container{constructor(t,i,s,n,a,r,o,h){super(t,i,s),e(this,"preparationTabContainer"),e(this,"selectedTabIndex"),e(this,"resultsContainer"),e(this,"rentContainer"),e(this,"upgradesContainer"),e(this,"staffContainer"),e(this,"marketingContainer"),e(this,"buySuppliesContainer"),e(this,"recipeContainer"),e(this,"budget"),e(this,"supplies"),e(this,"tabItemsBackgroundContainer"),e(this,"purchaseSupplies",((t,e)=>{const{lemonTotalPrice:i,sugarTotalPrice:s,iceTotalPrice:n,cupsTotalPrice:a}=t,{lemonTotalAmount:r,sugarTotalAmount:o,iceTotalAmount:h,cupsTotalAmount:u}=e,c=this.budget.amount,l=i+s+n+a;if(l>c)return void alert("You don't have enough budget to buy all the supplies");const d=(t,e,i)=>t>e&&(alert(`You can't have more than ${e} ${i}`),!0);if(d(r+this.supplies.lemon,100,"lemons")||d(o+this.supplies.sugar,100,"sugars")||d(h+this.supplies.ice,1e3,"ices")||d(u+this.supplies.cup,1e3,"cups"))return;const p=c-l;this.budget.amount=p,this.supplies.lemon+=r,this.supplies.sugar+=o,this.supplies.ice+=h,this.supplies.cup+=u,this.buySuppliesContainer.reset()}));this.preparationTabContainer=new I(t,48.5,0),this.preparationTabContainer.on("tabSelected",this.onTabSelected,this),this.selectedTabIndex=0,this.budget=a,this.supplies=r,this.resultsContainer=new A(t,32,64),this.rentContainer=new O(t,32,64,o),this.upgradesContainer=new j(t,32,64),this.staffContainer=new M(t,32,64),this.marketingContainer=new P(t,32,64,n),this.buySuppliesContainer=new v(t,32,64,this.purchaseSupplies),this.recipeContainer=new B(t,32,64,this.supplies,h),this.tabItemsBackgroundContainer=t.add.rectangle(16,50,488,384,38449,1),this.tabItemsBackgroundContainer.setOrigin(0,0),this.add([this.tabItemsBackgroundContainer,this.preparationTabContainer,this.resultsContainer,this.rentContainer,this.upgradesContainer,this.staffContainer,this.marketingContainer,this.buySuppliesContainer,this.recipeContainer]),t.add.existing(this),this.updateUI()}onTabSelected(t){this.selectedTabIndex=t,this.updateUI()}updateUI(){switch(this.resultsContainer.setVisible(!1),this.rentContainer.setVisible(!1),this.upgradesContainer.setVisible(!1),this.staffContainer.setVisible(!1),this.marketingContainer.setVisible(!1),this.buySuppliesContainer.setVisible(!1),this.recipeContainer.setVisible(!1),this.selectedTabIndex){case 0:this.resultsContainer.setVisible(!0);break;case 1:this.rentContainer.setVisible(!0);break;case 2:this.upgradesContainer.setVisible(!0);break;case 3:this.staffContainer.setVisible(!0);break;case 4:this.marketingContainer.setVisible(!0);break;case 5:this.recipeContainer.setVisible(!0);break;case 6:this.buySuppliesContainer.setVisible(!0)}}}class D extends s.Events.EventEmitter{constructor(t,i,s,n,a,r,o,h){super(),e(this,"_lemon"),e(this,"_sugar"),e(this,"_ice"),e(this,"_cup"),e(this,"_lemonAveragePrice"),e(this,"_sugarAveragePrice"),e(this,"_iceAveragePrice"),e(this,"_cupAveragePrice"),this._lemon=t,this._sugar=i,this._ice=s,this._cup=n,this._lemonAveragePrice=a,this._sugarAveragePrice=r,this._iceAveragePrice=o,this._cupAveragePrice=h}get lemon(){return this._lemon}set lemon(t){this._lemon=t,this.emit("lemonChanged",this._lemon)}get sugar(){return this._sugar}set sugar(t){this._sugar=t,this.emit("sugarChanged",this._sugar)}get ice(){return this._ice}set ice(t){this._ice=t,this.emit("iceChanged",this._ice)}get cup(){return this._cup}set cup(t){this._cup=t,this.emit("cupChanged",this._cup)}get lemonAveragePrice(){return this._lemonAveragePrice}set lemonAveragePrice(t){this._lemonAveragePrice=t}get sugarAveragePrice(){return this._sugarAveragePrice}set sugarAveragePrice(t){this._sugarAveragePrice=t}get iceAveragePrice(){return this._iceAveragePrice}set iceAveragePrice(t){this._iceAveragePrice=t}get cupAveragePrice(){return this._cupAveragePrice}set cupAveragePrice(t){this._cupAveragePrice=t}isOutOfSupplies(t){return this._lemon<t.lemon||this._sugar<t.sugar||this._ice<t.ice||this._cup<1}}class R extends s.Events.EventEmitter{constructor(t){super(),e(this,"_amount"),this._amount=t}get amount(){return this._amount}set amount(t){this._amount=t,this.emit("change",this._amount)}getAmountString(){return this._amount.toFixed(2)}}class V extends Phaser.Events.EventEmitter{constructor(){super(),e(this,"rentedLocationKey"),e(this,"popularityList"),e(this,"satisfactionList"),e(this,"getCurrentLocationKey",(()=>this.rentedLocationKey)),e(this,"getPopularity",(t=>this.popularityList[t])),e(this,"getSatisfaction",(t=>this.satisfactionList[t])),e(this,"setCurrentLocationKey",(t=>{this.rentedLocationKey=t,this.emit("locationChanged",t)})),e(this,"setPopularity",((t,e)=>{this.popularityList[t]=e,this.emit("popularityChanged",t,e)})),e(this,"setSatisfaction",((t,e)=>{this.satisfactionList[t]=e,this.emit("satisfactionChanged",t,e)})),this.rentedLocationKey=0,this.popularityList=[0,0,0,0,0],this.satisfactionList=[0,0,0,0,0]}}class F extends Phaser.GameObjects.Container{constructor(t,i,s,n,a,r,o){super(t,i,s),e(this,"date"),e(this,"todayTemperature"),e(this,"news"),e(this,"background"),e(this,"morningAtmosphereImage"),e(this,"afternoonAtmosphereImage"),e(this,"eveningAtmosphereImage"),this.date=t.add.text(16,16,n.getDateString(),{fontSize:"16px"}),this.news=t.add.text(244,48,r,{fontSize:"12px"}),this.todayTemperature=t.add.text(16,40,this.getTodayTemperature(a),{fontSize:"16px"}),this.morningAtmosphereImage=t.add.image(32,88,this.getAtmosphereImage(a.morning)),this.afternoonAtmosphereImage=t.add.image(96,88,this.getAtmosphereImage(a.afternoon)),this.eveningAtmosphereImage=t.add.image(160,88,this.getAtmosphereImage(a.evening)),this.background=t.add.rectangle(0,0,488,120,33321,1),this.background.setOrigin(0,0),this.add([this.background,this.date,this.news,this.todayTemperature,this.morningAtmosphereImage,this.afternoonAtmosphereImage,this.eveningAtmosphereImage]),t.add.existing(this)}getTodayTemperature(t){return`${this.getLowestTemperature(t)}${t.isCelsius?"C":"F"} - ${this.getHighestTemperature(t)}${t.isCelsius?"C":"F"}`}getLowestTemperature(t){return Math.min(...Object.values(t.temperatureByTime))}getHighestTemperature(t){return Math.max(...Object.values(t.temperatureByTime))}getAtmosphereImage(t){switch(t){case"sunny":default:return"sunny-24";case"cloudy":return"cloudy-24";case"rainy":return"rainy-24";case"little-cloudy":return"little-cloudy-24"}}}class U extends Phaser.Events.EventEmitter{constructor(t,i,s,n,a){super(),e(this,"_temperatureByTime"),e(this,"_morning"),e(this,"_afternoon"),e(this,"_evening"),e(this,"_isCelsius"),this._temperatureByTime=t,this._morning=i,this._afternoon=s,this._evening=n,this._isCelsius=a}get temperatureByTime(){return this._temperatureByTime}get morning(){return this._morning}get afternoon(){return this._afternoon}get evening(){return this._evening}get isCelsius(){return this._isCelsius}}function $(t){return Math.round(9*t/5+32)}class N extends Phaser.GameObjects.Container{constructor(t,i,s,n,a,r){super(t,i,s),e(this,"locationTitleText"),e(this,"locationDetailText"),e(this,"locationPopularityText"),e(this,"locationSatisfactionText"),e(this,"background"),e(this,"map"),e(this,"tileset"),this.map=n,this.tileset=a;const h=r.getCurrentLocationKey(),{title:u,description:c}=k[h];this.locationTitleText=new o(t,12,396,u),this.locationDetailText=new Phaser.GameObjects.Text(t,12,424,c,{fontSize:"12px"});const l=r.getPopularity(h),d=r.getSatisfaction(h);this.locationPopularityText=new Phaser.GameObjects.Text(t,12,504,`Popularity: ${l}`,{fontSize:"12px"}),this.locationSatisfactionText=new Phaser.GameObjects.Text(t,204,504,`Satisfaction: ${d}`,{fontSize:"12px"}),r.on("locationChanged",(t=>{const{title:e,description:i}=k[t];this.locationTitleText.setText(e),this.locationDetailText.setText(i);const s=r.getPopularity(t),n=r.getSatisfaction(t);this.locationPopularityText.setText(`Popularity: ${s}`),this.locationSatisfactionText.setText(`Satisfaction: ${n}`)})),this.background=t.add.rectangle(0,0,488,544,33321,1),this.background.setOrigin(0,0),this.add([this.background,this.locationTitleText,this.locationDetailText,this.locationPopularityText,this.locationSatisfactionText]),t.add.existing(this),this.loadMap()}loadMap(){var t,e,i;if(this.tileset){const s=516,n=198;null==(t=this.map.createLayer("Tile Layer 1",this.tileset))||t.setPosition(s,n),null==(e=this.map.createLayer("Tile Layer 2",this.tileset))||e.setPosition(s,n),null==(i=this.map.createLayer("Tile Layer 3",this.tileset))||i.setPosition(s,n)}else console.error("Failed to load tileset")}}class W extends Phaser.Events.EventEmitter{constructor(t,i){super(),e(this,"_characterIndex"),e(this,"_patience"),e(this,"getCharacterIndex",(()=>this._characterIndex)),e(this,"getPatience",(()=>this._patience)),e(this,"setCharacterIndex",(t=>{this._characterIndex=t,this.emit("change",this._characterIndex)})),e(this,"setPatience",(t=>{this._patience=t,this.emit("change",this._patience)})),e(this,"decreasePatience",(()=>{this._patience-=1,this.emit("change",this._patience)})),this._characterIndex=t,this._patience=i}}class G extends Phaser.Events.EventEmitter{constructor(t=5){super(),e(this,"_queue"),e(this,"_maxQueueLength"),this._queue=[],this._maxQueueLength=t}get queue(){return this._queue}get maxQueueLength(){return this._maxQueueLength}get length(){return this._queue.length}enqueue(t){this._queue.length<this._maxQueueLength&&(this._queue.push(t),this.emit("change",this._queue))}peak(){if(this._queue.length>0)return this._queue[0]}dequeue(){if(this._queue.length>0)return this.emit("change",this._queue),this._queue.shift()}removeCustomer(t){const e=this._queue.indexOf(t);-1!==e&&(this._queue.splice(e,1),this.emit("change",this._queue))}[Symbol.iterator](){return this._queue[Symbol.iterator]()}map(t){return this._queue.map(t)}forEach(t){this._queue.forEach(t)}}class z extends Phaser.Events.EventEmitter{constructor(t){super(),e(this,"_amount"),this._amount=t}get amount(){return Number(this._amount.toFixed(2))}set amount(t){this._amount=t,this.emit("change",this._amount)}decrease(){this.amount-=1}}class H extends Phaser.GameObjects.Container{constructor(t,i,s,n,a){var r;super(t,i,s),e(this,"performanceText"),e(this,"background"),e(this,"cupsSoldText"),e(this,"profitText"),e(this,"result"),e(this,"reviewText"),e(this,"reviews");this.result=n,this.reviews=a,this.performanceText=new o(t,32,16,"PERFORMANCE"),this.cupsSoldText=t.add.text(32,56,`Cups Sold: ${n.getCupsSold()}`),this.profitText=t.add.text(32,96,`Profit: $${n.getProfit()}`),this.reviewText=t.add.text(32,136,(null==(r=this.reviews.getLatestReview())?void 0:r.getText())||"No reviews yet"),n.on("cupsSoldChanged",(t=>{this.cupsSoldText.setText(`Cups Sold: ${t}`)})),n.on("profitChanged",(t=>{this.profitText.setText(`Profit: $${t}`)})),a.on("reviewAdded",(t=>{this.reviewText.setText(t.getText())})),this.background=t.add.rectangle(16,0,488,180,33321,1),this.background.setOrigin(0,0),this.add([this.background,this.performanceText,this.cupsSoldText,this.profitText,this.reviewText]),this.scene.add.existing(this),t.events.on(Phaser.Scenes.Events.SHUTDOWN,this.onSceneShutdown,this)}onSceneShutdown(){this.result.off("cupsSoldChanged"),this.result.off("profitChanged"),this.reviews.off("reviewAdded")}}class q extends Phaser.Events.EventEmitter{constructor(t,i){super(),e(this,"profit"),e(this,"cupsSold"),this.profit=t,this.cupsSold=i}getProfit(){return this.profit}setProfit(t){this.profit=t,this.emit("profitChanged",this.profit)}addProfit(t){this.profit+=t,this.emit("profitChanged",this.profit)}getCupsSold(){return this.cupsSold}setCupsSold(t){this.cupsSold=t,this.emit("cupsSoldChanged",this.cupsSold)}addCupsSold(t){this.cupsSold+=t,this.emit("cupsSoldChanged",this.cupsSold)}increaseCupsSold(){this.cupsSold++,this.emit("cupsSoldChanged",this.cupsSold)}}const K=["The lemonade was perfect!","I loved the lemonade!","The lemonade was great!"],Q=["The lemonade was okay.","The lemonade was fine."],Y=["The lemonade was bad.","I didn't like the lemonade."],J=["The lemonade was terrible.","I hated the lemonade."],X=["The lemonade was too expensive.","The lemonade was overpriced."],Z=["The queue was too long.","The queue was too slow."],tt=t=>{switch(t){case 1:return Y;case 2:return Q;case 3:return K;case 0:return J;default:return[]}},et=()=>Phaser.Math.RND.pick(Z);class it{constructor(t,i,s){e(this,"characterIndex"),e(this,"text"),e(this,"star"),this.characterIndex=t,this.text=i,this.star=s}getCharacterIndex(){return this.characterIndex}getText(){return this.text}setText(t){this.text=t}getStar(){return this.star}setStar(t){this.star=t}}class st extends Phaser.Events.EventEmitter{constructor(){super(),e(this,"_reviews"),this._reviews=[]}get reviews(){return this._reviews}addReview(t){this._reviews.push(t),this.emit("reviewAdded",t)}getLatestReview(){return this.reviews.length>0?this._reviews[this._reviews.length-1]:void 0}}const nt={x:515,y:194};class at extends i.Scene{constructor(t){super({key:t}),e(this,"camera"),e(this,"supplyStatusContainer"),e(this,"budgetContainer"),e(this,"gameControlUI"),e(this,"performanceContainer"),e(this,"weatherNewsContainer"),e(this,"mapContainer"),e(this,"skipButton"),e(this,"budget"),e(this,"supplies"),e(this,"weatherForecast"),e(this,"news"),e(this,"_date"),e(this,"rentedLocation"),e(this,"recipe"),e(this,"price"),e(this,"lemonadePitcher",new z(0)),e(this,"todayResult",new q(0,0)),e(this,"reviews",new st),e(this,"pathPoints"),e(this,"customerQueue"),e(this,"enterObjectLayer"),e(this,"exitObjectLayer"),e(this,"timerEvent"),e(this,"enterIntervalDuration"),e(this,"queueIntervalDuration"),e(this,"sellIntervalDuration"),e(this,"customerQueueSprites",new Map),e(this,"isAnimationCreated",!1),e(this,"customerListByHour"),e(this,"sceneKey"),this.sceneKey=t}init(t){this.budget=t.budget,this.supplies=t.supplies,this.weatherForecast=t.weatherForecast,this.news=t.news,this._date=t._date,this.rentedLocation=t.rentedLocation,this.recipe=t.recipe,this.price=t.price}preload(){this.load.spritesheet("characters","assets/characters/characters.png",{frameWidth:16,frameHeight:16}),this.load.image("lemonade-pitcher","assets/lemonade-pitcher-32.png")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor("rgb(24, 174, 49)"),this.supplyStatusContainer=new u(this,50,25,this.supplies,this.lemonadePitcher),this.budgetContainer=new c(this,900,16,this.budget),this.performanceContainer=new H(this,0,194,this.todayResult,this.reviews),this.weatherNewsContainer=new F(this,512,64,this._date,this.weatherForecast,this.news,!0);const t=this.make.tilemap({key:"park-map"}),e=t.addTilesetImage("tilemap_packed","tiles");this.mapContainer=new N(this,512,194,t,e,this.rentedLocation),this.skipButton=new d(this,950,555,"SKIP"),this.skipButton.on("pointerdown",(()=>{this._date.setToNextDay(),this.switchToPreparationScene()})),this.makeLemonade({disableDelay:!0}),this.lemonadePitcher.on("change",(t=>{t>0||this.makeLemonade()})),this.customerQueue=new G,this.customerQueue.on("change",(()=>{this.drawCustomerQueue()})),this.customerListByHour=this.getCustomerList(this.weatherForecast),this.enterObjectLayer=t.getObjectLayer("Npc Enter Path"),this.exitObjectLayer=t.getObjectLayer("Npc Exit Path"),this.isAnimationCreated||(this.createAnimation(),this.isAnimationCreated=!0),this.timerEvent=this.time.addEvent({delay:72e3,callback:this.switchToPreparationScene,callbackScope:this,loop:!1}),this.enterIntervalDuration=this.time.addEvent({delay:1e3,callback:this.customerEnterTheMap,callbackScope:this,loop:!0}),this.queueIntervalDuration=this.time.addEvent({delay:1e3,callback:this.updateCustomerQueue,callbackScope:this,loop:!0}),this.sellIntervalDuration=this.time.addEvent({delay:1e3,callback:this.sellLemonade,callbackScope:this,loop:!0})}makeLemonade({disableDelay:t}={disableDelay:!1}){this.supplies.lemon<this.recipe.lemon||this.supplies.sugar<this.recipe.sugar||this.supplies.ice<this.recipe.ice||this.supplies.cup<1||(this.supplies.lemon-=this.recipe.lemon,this.supplies.sugar-=this.recipe.sugar,this.supplies.ice-=this.recipe.ice*this.recipe.cupsPerPitcher,t?this.lemonadePitcher.amount+=this.recipe.cupsPerPitcher:this.time.delayedCall(3e3,(()=>{this.lemonadePitcher.amount+=this.recipe.cupsPerPitcher}),[],this))}sellLemonade(){if(this.lemonadePitcher.amount<=0)return;if(this.customerQueue.length<=0)return;if(this.supplies.cup<=0)return;const t=this.customerQueue.dequeue();this.lemonadePitcher.decrease(),this.supplies.cup-=1,this.budget.amount+=this.price.amount,this.todayResult.increaseCupsSold(),this.todayResult.addProfit(this.price.amount),this.customerLeaveTheMap(t);const{text:e,star:i}=this.recipe.getReview(this.price,this.weatherForecast),s=new it(t.getCharacterIndex(),e,i);this.reviews.addReview(s)}customerEnterTheMap(){const t=this.timerEvent.getElapsed(),e=Math.floor(t/1e3/6)+8;if(this.enterObjectLayer){const t=this.customerListByHour[e];if(!t||!t.length)return;const i=t[0].getCharacterIndex();this.followEnterPath(i,nt,this.enterObjectLayer,t[0]),t.shift()}}updateCustomerQueue(){this.customerQueue.forEach((t=>{if(t.decreasePatience(),t.getPatience()<=0){const e=new it(t.getCharacterIndex(),et(),0);this.reviews.addReview(e),this.customerQueue.removeCustomer(t),this.drawCustomerQueue(),this.customerLeaveTheMap(t)}}))}drawCustomerQueue(){this.customerQueueSprites.size>0&&this.customerQueueSprites.forEach((t=>{t.destroy()})),this.customerQueue.forEach(((t,e)=>{let i=12*t.getCharacterIndex();0===e&&(i+=2);const s=this.add.sprite(700,394-16*e,"characters",i);this.customerQueueSprites.set(t,s)}))}switchToPreparationScene(){const t=new ut(`preparation-${this._date.getDateString()}`),e={budget:this.budget,supplies:this.supplies,rentedLocation:this.rentedLocation,_date:this._date,recipe:this.recipe,price:this.price,todayResult:this.todayResult};this.scene.add(`preparation-${this._date.getDateString()}`,t,!0,e),this.scene.start(`preparation-${this._date.getDateString()}`),this.scene.get(this.scene.key).sys.shutdown(),this.scene.stop(this.scene.key),this.scene.remove(this.scene.key)}createAnimation(){for(let t=0;t<20;t++)this.anims.exists(`walk-down-${t}`)||this.anims.create({key:`walk-down-${t}`,frames:this.anims.generateFrameNumbers("characters",{start:12*t+4,end:12*t+5}),frameRate:6,repeat:-1}),this.anims.exists(`walk-up-${t}`)||this.anims.create({key:`walk-up-${t}`,frames:this.anims.generateFrameNumbers("characters",{start:12*t+6,end:12*t+7}),frameRate:6,repeat:-1}),this.anims.exists(`walk-right-${t}`)||this.anims.create({key:`walk-right-${t}`,frames:this.anims.generateFrameNumbers("characters",{start:12*t+8,end:12*t+9}),frameRate:6,repeat:-1}),this.anims.exists(`walk-left-${t}`)||this.anims.create({key:`walk-left-${t}`,frames:this.anims.generateFrameNumbers("characters",{start:12*t+10,end:12*t+11}),frameRate:6,repeat:-1})}getCustomerList(t){const{morning:e,afternoon:i,evening:s,temperatureByTime:n,isCelsius:a}=t,r={};for(let o=8;o<=19;o++){const t=o<12?e:o<18?i:s,h=a?n[o]:$(n[o]);r[o]=this.makeCustomerListByTime(o,h,t)}return r}makeCustomerListByTime(t,e,i){const s=[],n=this.setCustomerCount(t,e,i);for(let a=0;a<n;a++){const t=Math.floor(19*Math.random()),e=new W(t,5);s.push(e)}return s}setCustomerCount(t,e,i){let s=2;return t>=12&&t<18&&(s*=2),e>25&&(s*=2),"sunny"===i&&(s*=2),s}followEnterPath(t,e,i,s){var n;const a=i.objects.filter((t=>t.name.startsWith("enter"))),r=a[Math.floor(Math.random()*a.length)],o=(null==(n=r.properties.find((t=>"initDirection"===t.name)))?void 0:n.value)??"right",h=["down","up","right","left"].indexOf(o);if(!r||!r.polyline)return void console.error("NPC path or polyline missing in Tiled.");this.pathPoints=r.polyline.map((t=>({x:r.x+t.x+e.x,y:r.y+t.y+e.y})));const u=this.add.sprite(this.pathPoints[0].x,this.pathPoints[0].y,"characters",12*t+h);u&&this.followPath({characterIndex:t,sprite:u,pathPoints:this.pathPoints,shouldDestroySpriteAfterComplete:!0,onComplete:this.checkLemonadeStand.bind(this,s)})}checkLemonadeStand(t){if(this.supplies.isOutOfSupplies(this.recipe)&&0===this.lemonadePitcher.amount)return void this.customerLeaveTheMap(t);if(this.price.amount>2){this.customerLeaveTheMap(t);const e=new it(t.getCharacterIndex(),Phaser.Math.RND.pick(X),0);return void this.reviews.addReview(e)}if(this.customerQueue.length>=5){this.customerLeaveTheMap(t);const e=new it(t.getCharacterIndex(),et(),0);return void this.reviews.addReview(e)}const e=this.isVeryHot()?30:this.isHot()?15:this.isCold()?-15:0;Math.floor(100*Math.random()+e)>50?this.customerQueue.enqueue(t):this.customerLeaveTheMap(t)}isVeryHot(){const t=this.timerEvent.getElapsed(),e=Math.floor(t/1e3/6)+8;return this.weatherForecast.temperatureByTime[e]>30}isHot(){const t=this.timerEvent.getElapsed(),e=Math.floor(t/1e3/6)+8;return this.weatherForecast.temperatureByTime[e]>25}isCold(){const t=this.timerEvent.getElapsed(),e=Math.floor(t/1e3/6)+8;return this.weatherForecast.temperatureByTime[e]<20}customerLeaveTheMap(t){this.exitObjectLayer&&this.followExitPath(t.getCharacterIndex(),nt,this.exitObjectLayer)}followExitPath(t,e,i){const s=i.objects.filter((t=>t.name.startsWith("exit"))),n=s[Math.floor(Math.random()*s.length)];if(!n||!n.polyline)return void console.error("NPC path or polyline missing in Tiled.");this.pathPoints=n.polyline.map((t=>({x:n.x+t.x+e.x,y:n.y+t.y+e.y})));const a=this.add.sprite(this.pathPoints[0].x,this.pathPoints[0].y,"characters",12*t);a&&this.followPath({characterIndex:t,sprite:a,pathPoints:this.pathPoints,loopPath:!1,shouldDestroySpriteAfterComplete:!0})}destroySprite(t){t.destroy()}followPath({characterIndex:t,sprite:e,pathPoints:i,onComplete:s,loopPath:n=!1,shouldDestroySpriteAfterComplete:a=!1}){let r=0;const o=()=>{if(r>=i.length){if(null==s||s.call(this,t),a&&e.destroy(),!n)return;r=0}const h=i[r-1]||e,u=i[r++];u.x>h.x?e.play(`walk-right-${t}`):u.x<h.x?e.play(`walk-left-${t}`):u.y>h.y?e.play(`walk-down-${t}`):u.y<h.y&&e.play(`walk-up-${t}`),this.tweens.add({targets:e,x:u.x,y:u.y,duration:1e3,ease:"Linear",onComplete:o})};o()}}class rt extends Phaser.Events.EventEmitter{constructor(t,i,s){super(),e(this,"year"),e(this,"month"),e(this,"day"),e(this,"getYear",(()=>this.year)),e(this,"getMonth",(()=>this.month)),e(this,"getDay",(()=>this.day)),e(this,"getDateString",(()=>`Year ${this.year} Month ${this.month} Day ${this.day}`)),e(this,"getNextDay",(()=>{const t=new Date(this.year,this.month-1,this.day);return t.setDate(t.getDate()+1),new rt(t.getFullYear(),t.getMonth()+1,t.getDate())})),e(this,"setYear",(t=>{this.year=t,this.emit("change",this.year)})),e(this,"setMonth",(t=>{this.month=t,this.emit("change",this.month)})),e(this,"setDay",(t=>{this.day=t,this.emit("change",this.day)})),e(this,"setDate",((t,e,i)=>{this.setYear(t),this.setMonth(e),this.setDay(i)})),e(this,"setToNextDay",(()=>{const t=this.getNextDay();this.setDate(t.year,t.month,t.day)})),this.year=t,this.month=i,this.day=s}}class ot extends Phaser.Events.EventEmitter{constructor(t,i,s,n){super(),e(this,"_lemon"),e(this,"_sugar"),e(this,"_ice"),e(this,"_cupsPerPitcher"),e(this,"_costPerCup"),e(this,"supplies"),this._lemon=t,this._sugar=i,this._ice=s,this.supplies=n,this._cupsPerPitcher=l[s],this._costPerCup=this.getCostPerCup(t,i)}getCostPerCup(t,e){return(t*this.supplies.lemonAveragePrice+e*this.supplies.sugarAveragePrice+this.supplies.cup)/this._cupsPerPitcher}getFlavor(){const t=this.getRatio();return this._sugar>=3&&2===t?"perfect":t>=1.5&&t<=2.5&&this._lemon>=2&&this._sugar>=1?"good":"bad"}getRatio(){return this._lemon/this._sugar}getFlavorReview(){const t=this.getRatio(),e=[];return 2===t?e.push("Perfect balance between lemon and sugar."):t>2?e.push("More sugar will be better."):e.push("More lemon will be better."),e}getReview(t,e){const i=this.getFlavor(),s=this.getFlavorReview(),n="perfect"===i?3:"good"===i?2:1;return{text:Phaser.Math.RND.pick([...s,...tt(n)]),star:n}}get lemon(){return this._lemon}set lemon(t){this._lemon=t,this._costPerCup=this.getCostPerCup(t,this._sugar),this.emit("change",this)}get sugar(){return this._sugar}set sugar(t){this._sugar=t,this._costPerCup=this.getCostPerCup(this._lemon,t),this.emit("change",this)}get ice(){return this._ice}set ice(t){this._ice=t,this._cupsPerPitcher=l[t],this._costPerCup=this.getCostPerCup(this._lemon,this._sugar),this.emit("change",this)}get cupsPerPitcher(){return this._cupsPerPitcher}get costPerCup(){return this._costPerCup}}class ht extends Phaser.Events.EventEmitter{constructor(t){super(),e(this,"_amount"),this._amount=t}get amount(){return Number(this._amount.toFixed(2))}get amountString(){return this._amount.toFixed(2)}set amount(t){this._amount=t,this.emit("change",this._amount)}increase(){this.amount+=.1}decrease(){this.amount-=.1}}class ut extends i.Scene{constructor(t){super({key:t}),e(this,"bgm"),e(this,"camera"),e(this,"background"),e(this,"budget"),e(this,"supplies"),e(this,"rentedLocation"),e(this,"_date"),e(this,"recipe"),e(this,"price"),e(this,"yesterdayResult"),e(this,"supplyStatusContainer"),e(this,"budgetContainer"),e(this,"gameControlUI"),e(this,"startButton"),e(this,"weatherNewsContainer"),e(this,"mapContainer"),e(this,"speakerButton"),e(this,"sceneKey"),this.sceneKey=t}preload(){this.load.audio("bgm","assets/audio/bgm.mp3"),this.load.image("lemon","assets/lemon-32.png"),this.load.image("ice","assets/ice-32.png"),this.load.image("sugar","assets/sugar-32.png"),this.load.image("cup","assets/cup-32.png"),this.load.image("plus","assets/plus.svg"),this.load.image("minus","assets/minus.svg"),this.load.image("cup-16","assets/cup-16.png"),this.load.image("recipe-16","assets/recipe-16.png"),this.load.image("marketing-32","assets/marketing-32.png"),this.load.image("recipe-32","assets/recipe-32.png"),this.load.image("rent-32","assets/rent-32.png"),this.load.image("results-32","assets/results-32.png"),this.load.image("staff-32","assets/staff-32.png"),this.load.image("supplies-32","assets/supplies-32.png"),this.load.image("upgrades-32","assets/upgrades-32.png"),this.load.image("sunny-24","assets/sunny-24.png"),this.load.image("cloudy-24","assets/cloudy-24.png"),this.load.image("rainy-24","assets/rainy-24.png"),this.load.image("little-cloudy-24","assets/little-cloudy-24.png"),this.load.image("speaker-32","assets/speaker-32.png"),this.load.image("speaker-mute-32","assets/speaker-mute-32.png"),this.load.image("tiles","assets/tiles/tilemap_packed.png"),this.load.tilemapTiledJSON("park-map","assets/tiles/park.json")}init(t){this.budget=t.budget??new R(100),this.supplies=t.supplies??new D(0,0,0,0,0,0,0,0),this.rentedLocation=t.rentedLocation??new V,this._date=t._date??new rt(2025,7,1),this.recipe=t.recipe??new ot(1,1,1,this.supplies),this.price=t.price??new ht(1),this.yesterdayResult=t.todayResult}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor("rgb(24, 174, 49)"),this.loadBgm();const t=this.getWeatherForecast({isCelsius:!0}),e=this.getNews();this.supplyStatusContainer=new u(this,50,25,this.supplies),this.budgetContainer=new c(this,900,16,this.budget),this.gameControlUI=new E(this,0,144,this.price,this.budget,this.supplies,this.rentedLocation,this.recipe),this.weatherNewsContainer=new F(this,512,64,this._date,t,e,!0);const i=this.make.tilemap({key:"park-map"}),s=i.addTilesetImage("tilemap_packed","tiles");this.mapContainer=new N(this,512,194,i,s,this.rentedLocation),this.startButton=new d(this,410,700,"START GAME"),this.startButton.setInteractive(),this.startButton.on("pointerdown",(()=>{const i=new at(`day-${this._date.getDateString()}`),s={budget:this.budget,supplies:this.supplies,weatherForecast:t,news:e,_date:this._date,rentedLocation:this.rentedLocation,recipe:this.recipe,price:this.price};this.scene.add(`day-${this._date.getDateString()}`,i,!0,s),this.scene.start(`day-${this._date.getDateString()}`),this.scene.get(this.sceneKey).sys.shutdown(),this.scene.stop(this.sceneKey),this.scene.remove(this.sceneKey),this.sound.remove(this.bgm)}))}loadBgm(){if(!this.sound.get("bgm")){if(this.bgm=this.sound.add("bgm",{loop:!0,volume:.5}),this.registry.get("bgmPaused"))return void this.bgm.pause();this.bgm.play()}this.speakerButton=this.add.image(50,718,this.registry.get("bgmPaused")?"speaker-mute-32":"speaker-32").setInteractive({cursor:"pointer"}),this.speakerButton.on("pointerdown",(()=>{this.registry.get("bgmPaused")?(this.bgm.play(),this.speakerButton.setTexture("speaker-32"),this.registry.set("bgmPaused",!1)):(this.bgm.pause(),this.speakerButton.setTexture("speaker-mute-32"),this.registry.set("bgmPaused",!0))}))}getNews(){return"Today's news: Sunny day. \nPerfect day for selling lemonade!"}getWeatherForecast({isCelsius:t}){const e=this.generateTemperatureByTime(t);return new U(e,"sunny","sunny","sunny",t)}generateTemperatureByTime(t){const e={};for(let i=0;i<24;i++){const s=Math.floor(30*Math.random())+10;e[i]=t?s:$(s)}return e}}class ct extends i.Scene{constructor(){super("MainMenu"),e(this,"background"),e(this,"logo"),e(this,"title"),e(this,"startButton"),e(this,"startTictactoeButton"),e(this,"optionsButton")}create(){const t=new ut("preparation");this.scene.add("preparation",t,!0),this.scene.start("preparation"),this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.startButton=this.add.text(512,520,"Start Game",{fontFamily:"Arial",fontSize:32,color:"#ffffff",backgroundColor:"#0000ff",padding:{x:10,y:5}}).setOrigin(.5).setInteractive(),this.startTictactoeButton=this.add.text(512,580,"Start Tic-Tac-Toe",{fontFamily:"Arial",fontSize:32,color:"#ffffff",backgroundColor:"#0000ff",padding:{x:10,y:5}}).setOrigin(.5).setInteractive(),this.optionsButton=this.add.text(512,640,"Options",{fontFamily:"Arial",fontSize:32,color:"#ffffff",backgroundColor:"#0000ff",padding:{x:10,y:5}}).setOrigin(.5).setInteractive(),this.startButton.on("pointerdown",(()=>{this.scene.start("Game")})),this.startTictactoeButton.on("pointerdown",(()=>{this.scene.start("TicTacToe")})),this.optionsButton.on("pointerdown",(()=>{this.scene.start("Options")}))}}class lt extends i.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}var dt,pt={exports:{}};dt=pt,function(){function t(t,e,i){return t.call.apply(t.bind,arguments)}function e(t,e,i){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function i(s,n,a){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:e).apply(null,arguments)}var s=Date.now||function(){return+new Date};function n(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var a=!!window.FontFace;function r(t,e,i,s){if(e=t.c.createElement(e),i)for(var n in i)i.hasOwnProperty(n)&&("style"==n?e.style.cssText=i[n]:e.setAttribute(n,i[n]));return s&&e.appendChild(t.c.createTextNode(s)),e}function o(t,e,i){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function u(t,e,i){e=e||[],i=i||[];for(var s=t.className.split(/\s+/),n=0;n<e.length;n+=1){for(var a=!1,r=0;r<s.length;r+=1)if(e[n]===s[r]){a=!0;break}a||s.push(e[n])}for(e=[],n=0;n<s.length;n+=1){for(a=!1,r=0;r<i.length;r+=1)if(s[n]===i[r]){a=!0;break}a||e.push(s[n])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var i=t.className.split(/\s+/),s=0,n=i.length;s<n;s++)if(i[s]==e)return!0;return!1}function l(t,e,i){function s(){c&&n&&h&&(c(u),c=null)}e=r(t,"link",{rel:"stylesheet",href:e,media:"all"});var n=!1,h=!0,u=null,c=i||null;a?(e.onload=function(){n=!0,s()},e.onerror=function(){n=!0,u=Error("Stylesheet failed to load"),s()}):setTimeout((function(){n=!0,s()}),0),o(t,"head",e)}function d(t,e,i,s){var n=t.c.getElementsByTagName("head")[0];if(n){var a=r(t,"script",{src:e}),o=!1;return a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&n.removeChild(a))},n.appendChild(a),setTimeout((function(){o||(o=!0,i&&i(Error("Script load timeout")))}),s||5e3),a}return null}function p(){this.a=0,this.c=null}function g(t){return t.a++,function(){t.a--,f(t)}}function m(t,e){t.c=e,f(t)}function f(t){0==t.a&&t.c&&(t.c(),t.c=null)}function y(t){this.a=t||"-"}function x(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var s=t[i].replace(/['"]/g,"");-1!=s.indexOf(" ")||/^\d/.test(s)?e.push("'"+s+"'"):e.push(s)}return e.join(",")}function b(t){return t.a+t.f}function T(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function v(t){var e=4,i="n",s=null;return t&&((s=t.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=t.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?e=7:/[1-9]00/.test(s[1])&&(e=parseInt(s[1].substr(0,1),10)))),i+e}function C(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new y("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function P(t){if(t.g){var e=c(t.f,t.a.c("wf","active")),i=[],s=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),u(t.f,i,s)}I(t,"inactive")}function I(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,b(i)):t.h[e]())}function S(){this.c={}}function B(t,e){this.c=t,this.f=e,this.a=r(this.c,"span",{"aria-hidden":"true"},this.f)}function k(t){o(t.c,"body",t.a)}function _(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";font-style:"+T(t)+";font-weight:"+t.f+"00;"}function O(t,e,i,s,n,a){this.g=t,this.j=e,this.a=s,this.c=i,this.f=n||3e3,this.h=a||void 0}function L(t,e,i,s,n,a,r){this.v=t,this.B=e,this.c=i,this.a=s,this.s=r||"BESbswy",this.f={},this.w=n||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new B(this.c,this.s),this.h=new B(this.c,this.s),this.j=new B(this.c,this.s),this.m=new B(this.c,this.s),t=_(t=new x(this.a.c+",serif",b(this.a))),this.g.a.style.cssText=t,t=_(t=new x(this.a.c+",sans-serif",b(this.a))),this.h.a.style.cssText=t,t=_(t=new x("serif",b(this.a))),this.j.a.style.cssText=t,t=_(t=new x("sans-serif",b(this.a))),this.m.a.style.cssText=t,k(this.g),k(this.h),k(this.j),k(this.m)}y.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},O.prototype.start=function(){var t=this.c.o.document,e=this,i=s(),n=new Promise((function(n,a){!function r(){s()-i>=e.f?a():t.fonts.load(function(t){return T(t)+" "+t.f+"00 300px "+w(t.c)}(e.a),e.h).then((function(t){1<=t.length?n():setTimeout(r,25)}),(function(){a()}))}()})),a=null,r=new Promise((function(t,i){a=setTimeout(i,e.f)}));Promise.race([r,n]).then((function(){a&&(clearTimeout(a),a=null),e.g(e.a)}),(function(){e.j(e.a)}))};var A={D:"serif",C:"sans-serif"},M=null;function j(){if(null===M){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);M=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return M}function E(t,e,i){for(var s in A)if(A.hasOwnProperty(s)&&e===t.f[A[s]]&&i===t.f[A[s]])return!0;return!1}function D(t){var e,n=t.g.a.offsetWidth,a=t.h.a.offsetWidth;(e=n===t.f.serif&&a===t.f["sans-serif"])||(e=j()&&E(t,n,a)),e?s()-t.A>=t.w?j()&&E(t,n,a)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?R(t,t.v):R(t,t.B):function(t){setTimeout(i((function(){D(this)}),t),50)}(t):R(t,t.v)}function R(t,e){setTimeout(i((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),e(this.a)}),t),0)}function V(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}L.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),D(this)};var F=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&u(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),I(t,"active")):P(t.a))}function $(t){this.j=t,this.a=new S,this.h=0,this.f=this.g=!0}function N(t,e,s,n,a){var r=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=a||null,o=n||{};if(0===s.length&&r)P(e.a);else{e.f+=s.length,r&&(e.j=r);var h,c=[];for(h=0;h<s.length;h++){var l=s[h],d=o[l.c],p=e.a,g=l;if(p.g&&u(p.f,[p.a.c("wf",g.c,b(g).toString(),"loading")]),I(p,"fontloading",g),p=null,null===F)if(window.FontFace){g=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);F=g?42<parseInt(g[1],10):!m}else F=!1;p=F?new O(i(e.g,e),i(e.h,e),e.c,l,e.s,d):new L(i(e.g,e),i(e.h,e),e.c,l,e.s,t,d),c.push(p)}for(h=0;h<c.length;h++)c[h].start()}}),0)}function W(t,e){this.c=t,this.a=e}function G(t,e){this.c=t,this.a=e}function z(t,e){this.c=t||H,this.a=[],this.f=[],this.g=e||""}V.prototype.g=function(t){var e=this.a;e.g&&u(e.f,[e.a.c("wf",t.c,b(t).toString(),"active")],[e.a.c("wf",t.c,b(t).toString(),"loading"),e.a.c("wf",t.c,b(t).toString(),"inactive")]),I(e,"fontactive",t),this.m=!0,U(this)},V.prototype.h=function(t){var e=this.a;if(e.g){var i=c(e.f,e.a.c("wf",t.c,b(t).toString(),"active")),s=[],n=[e.a.c("wf",t.c,b(t).toString(),"loading")];i||s.push(e.a.c("wf",t.c,b(t).toString(),"inactive")),u(e.f,s,n)}I(e,"fontinactive",t),U(this)},$.prototype.load=function(t){this.c=new n(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,i){var s=[],n=i.timeout;!function(t){t.g&&u(t.f,[t.a.c("wf","loading")]),I(t,"loading")}(e),s=function(t,e,i){var s,n=[];for(s in e)if(e.hasOwnProperty(s)){var a=t.c[s];a&&n.push(a(e[s],i))}return n}(t.a,i,t.c);var a=new V(t.c,e,n);for(t.h=s.length,e=0,i=s.length;e<i;e++)s[e].load((function(e,i,s){N(t,a,e,i,s)}))}(this,new C(this.c,t),t)},W.prototype.load=function(t){function e(){if(a["__mti_fntLst"+s]){var i,n=a["__mti_fntLst"+s](),r=[];if(n)for(var o=0;o<n.length;o++){var h=n[o].fontfamily;null!=n[o].fontStyle&&null!=n[o].fontWeight?(i=n[o].fontStyle+n[o].fontWeight,r.push(new x(h,i))):r.push(new x(h))}t(r)}else setTimeout((function(){e()}),50)}var i=this,s=i.a.projectId,n=i.a.version;if(s){var a=i.c.o;d(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(n?"?v="+n:""),(function(n){n?t([]):(a["__MonotypeConfiguration__"+s]=function(){return i.a},e())})).id="__MonotypeAPIScript__"+s}else t([])},G.prototype.load=function(t){var e,i,s=this.a.urls||[],n=this.a.families||[],a=this.a.testStrings||{},r=new p;for(e=0,i=s.length;e<i;e++)l(this.c,s[e],g(r));var o=[];for(e=0,i=n.length;e<i;e++)if((s=n[e].split(":"))[1])for(var h=s[1].split(","),u=0;u<h.length;u+=1)o.push(new x(s[0],h[u]));else o.push(new x(s[0]));m(r,(function(){t(o,a)}))};var H="https://fonts.googleapis.com/css";function q(t){this.f=t,this.a=[],this.c={}}var K={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Y={i:"i",italic:"i",n:"n",normal:"n"},J=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function X(t,e){this.c=t,this.a=e}var Z={Arimo:!0,Cousine:!0,Tinos:!0};function tt(t,e){this.c=t,this.a=e}function et(t,e){this.c=t,this.f=e,this.a=[]}X.prototype.load=function(t){var e=new p,i=this.c,s=new z(this.a.api,this.a.text),n=this.a.families;!function(t,e){for(var i=e.length,s=0;s<i;s++){var n=e[s].split(":");3==n.length&&t.f.push(n.pop());var a="";2==n.length&&""!=n[1]&&(a=":"),t.a.push(n.join(a))}}(s,n);var a=new q(n);!function(t){for(var e=t.f.length,i=0;i<e;i++){var s=t.f[i].split(":"),n=s[0].replace(/\+/g," "),a=["n4"];if(2<=s.length){var r;if(r=[],o=s[1])for(var o,h=(o=o.split(",")).length,u=0;u<h;u++){var c;if((c=o[u]).match(/^[\w-]+$/))if(null==(l=J.exec(c.toLowerCase())))c="";else{if(c=null==(c=l[2])||""==c?"n":Y[c],null==(l=l[1])||""==l)l="4";else var l=Q[l]||(isNaN(l)?"4":l.substr(0,1));c=[c,l].join("")}else c="";c&&r.push(c)}0<r.length&&(a=r),3==s.length&&(r=[],0<(s=(s=s[2])?s.split(","):r).length&&(s=K[s[0]])&&(t.c[n]=s))}for(t.c[n]||(s=K[n])&&(t.c[n]=s),s=0;s<a.length;s+=1)t.a.push(new x(n,a[s]))}}(a),l(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],s=0;s<e;s++)i.push(t.a[s].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(s),g(e)),m(e,(function(){t(a.a,a.c,Z)}))},tt.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var s=[],n=0;n<e.length;n+=2)for(var a=e[n],r=e[n+1],o=0;o<r.length;o++)s.push(new x(a,r[o]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(h){}t(s)}}),2e3):t([])},et.prototype.load=function(t){var e=this.f.id,i=this.c.o,s=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var n=0,a=i.fonts.length;n<a;++n){var r=i.fonts[n];s.a.push(new x(r.name,v("font-weight:"+r.weight+";font-style:"+r.style)))}t(s.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var it=new $(window);it.a.c.custom=function(t,e){return new G(e,t)},it.a.c.fontdeck=function(t,e){return new et(e,t)},it.a.c.monotype=function(t,e){return new W(e,t)},it.a.c.typekit=function(t,e){return new tt(e,t)},it.a.c.google=function(t,e){return new X(e,t)};var st={load:i(it.load,it)};dt.exports?dt.exports=st:(window.WebFont=st,window.WebFontConfig&&it.load(window.WebFontConfig))}();const gt=n(pt.exports);window.onerror=function(t,e,i,s,n){return console.error(n),!0},window.addEventListener("unhandledrejection",(t=>{console.error(t.reason)})),gt.load({google:{families:["Play"]}});const mt={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,lt,ct,r,at]};new i.Game(mt);
